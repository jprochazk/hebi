---
source: ex/vm3/tests/./common/mod.rs
expression: snapshot
---
function `__main__` (registers: 13, length: 18 (72 bytes))
.const
  0: FunctionProto { name: "_0", params: 0, .. }
  1: FunctionProto { name: "_1", params: 0, .. }
  2: FunctionProto { name: "_2", params: 1, .. }
  3: FunctionProto { name: "_3", params: 3, .. }
  4: FunctionProto { name: "[fn@72..74]", params: 0, .. }
  5: FunctionProto { name: "[fn@89..91]", params: 0, .. }
  6: FunctionProto { name: "[fn@108..110]", params: 1, .. }
  7: FunctionProto { name: "[fn@128..130]", params: 3, .. }
  8: FunctionProto { name: "foo", params: 0, .. }
  9: FunctionProto { name: "bar", params: 0, .. }
  10: FunctionProto { name: "baz", params: 1, .. }
  11: FunctionProto { name: "quox", params: 3, .. }
  12: FunctionProto { name: "sum", params: 3, .. }
  13: FunctionProto { name: "with_return", params: 3, .. }
  14: FunctionProto { name: "tail_if", params: 3, .. }
.code
  mf    [0], r1         ; fn _0 {}
  mf    [1], r2         ; fn _1() {}
  mf    [2], r3         ; fn _2(a) {}
  mf    [3], r4         ; fn _3(a, b, c) {}
  mf    [4], r5         ; let _4 = fn {}
  mf    [5], r6         ; let _5 = fn() {}
  mf    [6], r7         ; let _6 = fn(a) {}
  mf    [7], r8         ; let _7 = fn(a, b, c) {}
  mf    [8], r9         ; let _8 = fn foo {}
  mf    [9], r10        ; let _9 = fn bar() {}
  mf    [10], r11       ; let _10 = fn baz(a) {}
  mf    [11], r12       ; let _11 = fn quox(a, b, c) {}
  mf    [12], r1        ; fn sum(a, b, c) {
  mf    [13], r2        ; fn with_return(a, b, c) {
  mf    [14], r3        ; fn tail_if(a, b, c) {
  lnil  r0
  fin   
  ret   r0

function `_0` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `_1` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `_2` (registers: 3, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `_3` (registers: 5, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `[fn@72..74]` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `[fn@89..91]` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `[fn@108..110]` (registers: 3, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `[fn@128..130]` (registers: 5, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `foo` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `bar` (registers: 2, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `baz` (registers: 3, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `quox` (registers: 5, length: 2 (8 bytes))
.code
  lnil  r0
  ret   r0


function `sum` (registers: 6, length: 5 (20 bytes))
.code
  add   r1, r2, r4      ; a + b + c
  add   r4, r3, r4
  ret   r4
  lnil  r0
  ret   r0


function `with_return` (registers: 6, length: 5 (20 bytes))
.code
  add   r1, r2, r4      ; return a + b + c
  add   r4, r3, r4
  ret   r4
  lnil  r0
  ret   r0


function `tail_if` (registers: 6, length: 8 (32 bytes))
.code
  lbt   r4              ; if true {
  jf    r4, if::next#1
  add   r1, r2, r4      ; a + b
  jmp   if::end#0
<if::next#1>:
  mov   r3, r4          ; c
<if::end#0>:
  ret   r4
  lnil  r0
  ret   r0


